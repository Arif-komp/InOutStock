<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STOCK MANUAL GUDANG G5000</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }
        select, input {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }
        button {
            margin-top: 15px;
            padding: 10px;
            width: 100%;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #007BFF;
            color: white;
        }
        .history {
            margin-top: 20px;
            border-top: 1px solid #ccc;
            padding-top: 10px;
            max-height: 200px;
            overflow-y: auto;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 4px;
        }
        .history div {
            margin-bottom: 5px;
            padding: 5px;
            border-left: 4px solid #007BFF;
            background-color: #e9f5ff;
        }
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            button {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>STOCK MANUAL GUDANG G5000</h1>
        
        <label for="jenisProduk">Pilih Jenis Produk:</label>
        <select id="jenisProduk" onchange="updateNamaProduk()">
            <option value="">-- Pilih --</option>
            <option value="SEMEN">SEMEN</option>
            <option value="BESI">BESI</option>
            <option value="BWG">BWG - KAWAT DURI</option>
            <option value="GALVALUM">GALVALUM - BONDEX</option>
        </select>

        <label for="namaProduk">Pilih Nama Produk:</label>
        <select id="namaProduk">
            <option value="">-- Pilih --</option>
        </select>

        <label for="jumlahBarang">Jumlah Barang:</label>
        <input type="number" id="jumlahBarang" min="1">

        <label for="namaChecker">Nama Checker:</label>
        <input type="text" id="namaChecker">

        <button onclick="inputBarang('masuk')">Barang Masuk</button>
        <button onclick="inputBarang('keluar')">Barang Keluar</button>
        <button onclick="resetForm()">Reset</button>

        <div class="history" id="history"></div>
    </div>

    <script>
        const produk = {
            SEMEN: ["SEMEN TIGA RODA 50 KG", "SEMEN TONASA 50 KG", "SEMEN PUTIH JAGUAR 40 KG", "SB PEREKAT BATA RINGAN 40 KG"],
            BESI: ["KAWAT 8 (DELAPAN)", "KAWAT 10 (SEPULUH)", "KAWAT 12 (DUA BELAS)", "KAWAT 8.4 X 12", "KAWAT 25 (DUA PULUH LIMA) ULIR", "KAWAT 19 (SEMBILAN BELAS) ULIR", "KAWAT 22 (DUA PULUH DUA) ULIR", "KAWAT 13 (TIGA BELAS) ULIR", "KAWAT 7.1 X 12", "KAWAT 16 (ENAM BELAS)", "KAWAT 16 (ENAM BELAS) ULIR", "KAWAT 14 (EMPAT BELAS)", "KAWAT 11.4 X 12", "KAWAT 4.7 X 12", "KAWAT 10 (SEPULUH) ULIR", "KAWAT 6 (ENAM)"],
            BWG: ["BENDRAT PUTIH ROL (25 KG)", "BENDRAT PUTIH ROL (20 KG)", "BWG 12", "BWG 14", "BWG 16", "BWG 6", "BWG 8", "KAWAT DURI BIASA", "KAWAT DURI 100M (ANTI KARAT)", "LIS KAYU 4X4", "BENDRAT STIK 20 KG", "BWG 10"],
            GALVALUM: ["GALVALUM KENCANA (0.25) 4 M", "GALVALUM KENCANA (0.3) 4 M", "GALVALUM KENCANA (0.35) 4 M", "GALVALUM SOLID (0.3) 4 M"]
        };

        function updateNamaProduk() {
            const jenisProduk = document.getElementById("jenisProduk").value;
            const namaProdukSelect = document.getElementById("namaProduk");
            namaProdukSelect.innerHTML = '<option value="">-- Pilih --</option>'; // Reset options

            if (jenisProduk) {
                produk[jenisProduk].forEach(item => {
                    const option = document.createElement("option");
                    option.value = item;
                    option.textContent = item;
                    namaProdukSelect.appendChild(option);
                });
            }
        }

        function inputBarang(tipe) {
            const namaProduk = document.getElementById("namaProduk").value;
            const jumlahBarang = document.getElementById("jumlahBarang").value;
            const namaChecker = document.getElementById("namaChecker").value;

            if (!namaProduk || !jumlahBarang || !namaChecker) {
                alert("Semua field harus diisi!");
                return;
            }

            const labelJumlah = getLabelJumlah(namaProduk);
            const historyDiv = document.getElementById("history");
            const waktuInput = new Date().toLocaleString();
            const entry = `${waktuInput}: ${tipe === 'masuk' ? 'Barang Masuk' : 'Barang Keluar'} - ${namaProduk} (${jumlahBarang} ${labelJumlah}) oleh ${namaChecker}`;
            historyDiv.innerHTML += `<div>${entry}</div>`;

            // Simpan data ke Google Sheets
            google.script.run.withSuccessHandler(() => {
                console.log("Data berhasil disimpan.");
            }).simpanData(namaProduk, jumlahBarang, namaChecker, tipe);

            resetForm();
        }

        function getLabelJumlah(namaProduk) {
            if (namaProduk.includes("SEMEN") || namaProduk.includes("PEREKAT")) {
                return "sak";
            } else if (namaProduk.includes("KAWAT") || namaProduk.includes("LIS KAYU") || namaProduk.includes("BENDRAT STIK")) {
                return "batang";
            } else {
                return "rol";
            }
        }

        function resetForm() {
            document.getElementById("jenisProduk").value = "";
            document.getElementById("namaProduk").innerHTML = '<option value="">-- Pilih --</option>';
            document.getElementById("jumlahBarang").value = "";
            document.getElementById("namaChecker").value = "";
        }
    </script>
</body>
</html>
