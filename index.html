<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STOCK MANUAL GUDANG G5000</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            text-align: center;
        }
        form {
            margin-bottom: 20px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        input, select, button {
            margin: 5px;
            padding: 10px;
            width: calc(100% - 22px);
            font-size: 16px;
        }
        
        @media (max-width: 600px) {
            select {
                max-height: 40px;
                overflow: hidden;
                white-space: nowrap;
                text-overflow: ellipsis;
            }
            
            select option {
                font-size: 14px;
                padding: 8px;
            }
        }
        .history {
            margin-top: 20px;
            background-color: #fff;
            padding: 10px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>STOCK MANUAL GUDANG G5000</h1>
    <form id="inventoryForm">
        <select id="jenisBarang" required>
            <option value="">Pilih Jenis Barang</option>
            <option value="SEMEN">SEMEN</option>
            <option value="BESI">BESI</option>
            <option value="BWG">BWG - KAWAT DURI</option>
            <option value="GALVALUM">GALVALUM - BONDEX</option>
        </select>
        <select id="namaBarang" required>
            <option value="">Pilih Nama Barang</option>
        </select>
        <input type="number" id="jumlah" placeholder="Jumlah" required>
        <input type="text" id="checker" placeholder="Checker" required>
        <button type="button" onclick="submitData('masuk')">Barang Masuk</button>
        <button type="button" onclick="submitData('keluar')">Barang Keluar</button>
        <button type="reset">Reset</button>
    </form>
    <div class="history" id="history"></div>
    <button onclick="clearHistory()">Hapus History</button>

    <script>
        const namaBarangOptions = {
            'SEMEN': ["SEMEN TIGA RODA 50 KG", "SEMEN TONASA 50 KG", "SEMEN PUTIH JAGUAR 40 KG", "SB PEREKAT BATA RINGAN 40 KG"],
        'BESI': ["KAWAT 8 (DELAPAN)", "KAWAT 10 (SEPULUH)", "KAWAT 12 (DUA BELAS)", "KAWAT 8.4 X 12", "KAWAT 25 (DUA PULUH LIMA) ULIR", "KAWAT 19 (SEMBILAN BELAS) ULIR", "KAWAT 22 (DUA PULUH DUA) ULIR", "KAWAT 13 (TIGA BELAS) ULIR", "KAWAT 7.1 X 12", "KAWAT 16 (ENAM BELAS)", "KAWAT 16 (ENAM BELAS) ULIR", "KAWAT 14 (EMPAT BELAS)", "KAWAT 11.4 X 12", "KAWAT 4.7 X 12", "KAWAT 10 (SEPULUH) ULIR", "KAWAT 6 (ENAM)"],
        'BWG': ["BENDRAT PUTIH ROL (25 KG)", "BENDRAT PUTIH ROL (20 KG)", "BWG 12", "BWG 14", "BWG 16", "BWG 6", "BWG 8", "KAWAT DURI BIASA", "KAWAT DURI 100M (ANTI KARAT)", "LIS KAYU 4X4", "BENDRAT STIK 20 KG", "BWG 10"],
        'GALVALUM': ["GALVALUM KENCANA (0.25) 4 M", "GALVALUM KENCANA (0.3) 4 M", "GALVALUM KENCANA (0.35) 4 M", "GALVALUM SOLID (0.3) 4 M"]
        };

        document.getElementById('jenisBarang').addEventListener('change', function() {
            const namaBarangSelect = document.getElementById('namaBarang');
            namaBarangSelect.innerHTML = '<option value="">Pilih Nama Barang</option>';
            const selectedJenis = this.value;
            if (selectedJenis) {
                namaBarangOptions[selectedJenis].forEach(function(item) {
                    const option = document.createElement('option');
                    option.value = item;
                    option.textContent = item;
                    namaBarangSelect.appendChild(option);
                });
            }
        });

        function submitData(tipe) {
            const jenisBarang = document.getElementById('jenisBarang').value;
            const namaBarang = document.getElementById('namaBarang').value;
            const jumlah = document.getElementById('jumlah').value;
            const checker = document.getElementById('checker').value;

            if (jenisBarang && namaBarang && jumlah && checker) {
                google.script.run.withSuccessHandler(function() {
                    const historyDiv = document.getElementById('history');
                    const entry = document.createElement('div');
                    entry.textContent = `${tipe.charAt(0).toUpperCase() + tipe.slice(1)}: ${jumlah} ${namaBarang} (${jenisBarang}) oleh ${checker}`;
                    historyDiv.appendChild(entry);
                    document.getElementById('inventoryForm').reset();
                }).saveData(jenisBarang, namaBarang, jumlah, checker);
            } else {
                alert('Semua field harus diisi!');
            }
        }

        function clearHistory() {
            document.getElementById('history').innerHTML = '';
        }
    </script>
</body>
</html>
