<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STOCK MANUAL GUDANG G5000</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        form {
            display: flex;
            flex-direction: column;
            max-width: 400px;
        }
        label, select, input, button {
            margin: 10px 0;
        }
        .history {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>STOCK MANUAL GUDANG G5000</h1>
    <form id="stockForm">
        <label for="jenis_produk">Pilih Jenis Produk:</label>
        <select id="jenis_produk" name="jenis_produk" required>
            <option value="">--Pilih--</option>
            <option value="SEMEN">SEMEN</option>
            <option value="BESI">BESI</option>
            <option value="BWG - KAWAT DURI">BWG - KAWAT DURI</option>
            <option value="GALVALUM - BONDEX">GALVALUM - BONDEX</option>
        </select>

        <label for="nama_produk">Pilih Nama Produk:</label>
        <select id="nama_produk" name="nama_produk" required>
            <option value="">--Pilih--</option>
        </select>

        <label for="jumlah_barang">Jumlah Barang:</label>
        <input type="number" id="jumlah_barang" name="jumlah_barang" required>

        <label for="nama_checker">Nama Checker:</label>
        <input type="text" id="nama_checker" name="nama_checker" required>

        <button type="button" onclick="submitForm('masuk')">Barang Masuk</button>
        <button type="button" onclick="submitForm('keluar')">Barang Keluar</button>
        <button type="reset">Reset</button>
    </form>

    <div class="history" id="history"></div>

    <script>
        const produkOptions = {
            'SEMEN': ["SEMEN TIGA RODA 50 KG", "SEMEN TONASA 50 KG", "SEMEN PUTIH JAGUAR 40 KG", "SB PEREKAT BATA RINGAN 40 KG"],
            'BESI': ["KAWAT 8 (DELAPAN)", "KAWAT 10 (SEPULUH)", "KAWAT 12 (DUA BELAS)", "KAWAT 8.4 X 12", "KAWAT 25 (DUA PULUH LIMA) ULIR", "KAWAT 19 (SEMBILAN BELAS) ULIR", "KAWAT 22 (DUA PULUH DUA) ULIR", "KAWAT 13 (TIGA BELAS) ULIR", "KAWAT 7.1 X 12", "KAWAT 16 (ENAM BELAS)", "KAWAT 16 (ENAM BELAS) ULIR", "KAWAT 14 (EMPAT BELAS)", "KAWAT 11.4 X 12", "KAWAT 4.7 X 12", "KAWAT 10 (SEPULUH) ULIR", "KAWAT 6 (ENAM)"],
            'BWG - KAWAT DURI': ["BENDRAT PUTIH ROL (25 KG)", "BENDRAT PUTIH ROL (20 KG)", "BWG 12", "BWG 14", "BWG 16", "BWG 6", "BWG 8", "KAWAT DURI BIASA", "KAWAT DURI 100M (ANTI KARAT)", "LIS KAYU 4X4", "BENDRAT STIK 20 KG", "BWG 10"],
            'GALVALUM - BONDEX': ["GALVALUM KENCANA (0.25) 4 M", "GALVALUM KENCANA (0.3) 4 M", "GALVALUM KENCANA (0.35) 4 M", "GALVALUM SOLID (0.3) 4 M"]
        };

        document.getElementById('jenis_produk').addEventListener('change', function() {
            const namaProdukSelect = document.getElementById('nama_produk');
            namaProdukSelect.innerHTML = '<option value="">--Pilih--</option>'; // Reset options
            const selectedJenis = this.value;
            if (produkOptions[selectedJenis]) {
                produkOptions[selectedJenis].forEach(function(produk) {
                    const option = document.createElement('option');
                    option.value = produk;
                    option.textContent = produk;
                    namaProdukSelect.appendChild(option);
                });
            }
        });

        function submitForm(action) {
            const jenisProduk = document.getElementById('jenis_produk').value;
            const namaProduk = document.getElementById('nama_produk').value;
            const jumlahBarang = document.getElementById('jumlah_barang').value;
            const namaChecker = document.getElementById('nama_checker').value;

            if (jenisProduk && namaProduk && jumlahBarang && namaChecker) {
                const data = {
                    action: action,
                    jenis_produk: jenisProduk,
                    nama_produk: namaProduk,
                    jumlah_barang: jumlahBarang,
                    nama_checker: namaChecker
                };

                fetch('YOUR_SCRIPT_URL', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(result => {
                    if (result.result === 'success') {
                        // Tampilkan history
                        const historyDiv = document.getElementById('history');
                        const labelJumlah = getLabelJumlah(namaProduk);
                        historyDiv.innerHTML += `<p>${new Date().toLocaleString()}: ${action === 'masuk' ? 'Barang Masuk' : 'Barang Keluar'} - ${namaProduk} (${jumlahBarang} ${labelJumlah}) - Cek Nama Checker: ${namaChecker}</p>`;
                        document.getElementById('stockForm').reset(); // Reset form
                    }
                })
                .catch(error => console.error('Error:', error));
            } else {
                alert('Semua field harus diisi!');
            }
        }

        function getLabelJumlah(namaProduk) {
            if (namaProduk.includes('SEMEN') || namaProduk.includes('PEREKAT')) {
                return 'sak';
            } else if (namaProduk.includes('KAWAT') || namaProduk.includes('LIS KAYU') || namaProduk.includes('BENDRAT STIK')) {
                return 'batang';
            } else if (namaProduk.includes('KAWAT DURI') || namaProduk.includes('BENDRAT') || namaProduk.includes('BWG')) {
                return 'rol';
            } else if (namaProduk.includes('GALVALUM') || namaProduk.includes('BONDEX')) {
                return 'lembar';
            }
            return '';
        }
    </script>
</body>
</html>
